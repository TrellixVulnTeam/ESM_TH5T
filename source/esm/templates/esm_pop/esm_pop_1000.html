{% extends "esm_com/bizform.html" %} {% load static %} {% block header %}
<script>
  // 그리드 전역변수 설정
  var grid1; // var grid1, grid2, grid3, grid4 ..... ;

  $(function () {
    $('#date').parents(".input-group").datepicker({
      calendarWeeks: false,
      todayHighlight: true,
      autoclose: true,
      showMonthAfterYear: true,
      format: "yyyy-mm-dd",
      language: "kr"
    });

    $('#month').parents(".input-group").datepicker({
      calendarWeeks: false,
      todayHighlight: true,
      autoclose: true,
      format: "yyyy-mm",
      minViewMode: "months",  
      language: "kr"
    });

    // 그리드 초기화
    (function initGrid() {
      initGrid1(); // 메뉴목록
    })();

    // 메뉴목록
    function initGrid1() {

      // 그리드 옵션
      var options = {};

      // 그리드 초기화
      grid1 = $("#grid1").gfnGridInit([
        { fieldName: "masterCd",          text: "상위코드",       width: 70   , editable: false },
        { fieldName: "masterCdName",      text: "상위코드명",     width: 80,  essential: true , align: 'far', editable: false },
        { fieldName: "detailCd",          text: "상세코드", width: 180, essential: true , editable: false },
        { fieldName: "detailCdName",      text: "상세코드명", width: 220, essential: true , editable: false },
        { fieldName: "beginDate",         text: "시작일자",      width: 250, type: 'date', format: 'DATETIME', editable: false },
        { fieldName: "endDate",           text: "종료일자",          width: 120, essential: true , editable: false },
        { fieldName: "sortOrder",         text: "정렬순서",         width: 50,  align: 'center' , editable: false },

        { fieldName: "codeDetailUid",     text: "상위메뉴코드", width: 100, essential: true , align: 'center', editable: false , visible: false },
        { fieldName: "codeMasterUid",     text: "메뉴코드",     width: 80 , essential: true , align: 'center', editable: false , visible: false },
      ], options);


      // 그리드 상태바 설정
      grid1.gridView.setStateBar({
        visible: false
      });
      //그리드 체크박스 설정
      grid1.gridView.setCheckBar({
        visible: false,
      });

    }
  });

  /* action1에대한 기능 */
  function doAction1(gubun) {
    switch (gubun) {
      case "search": // 조회
        var menuName = $("#menuName").val();
        var url = $("#url").val();
        var useYn = $("#useYn").is(":checked") ? "1" : "0";

        // 화면 조회조건 항목별 값 
        var mainParam = {
          menuName: menuName,
          url: url,
          useYn: useYn,
          searchMasterCd: 'GENDER_CD',
        };
        console.log("mainParam ->", mainParam);

        // 조회조건, url, grid
        var params = {
          url: "/esm_pop_1000/searchCodeDetail",
          grid: "grid1", // or ['grid1', 'grid2', ...]
          mainParam: mainParam,
        };
        gfnGetGrdData(params);
        break;
      case "reset": // 초기화
        console.log(gubun)
        document.getElementById("menuName").values='';
        break;
      case "selectRow": // 선택
        
        break;
    }    
  }

  // 팝업 콜백
  function popupCallback(gubun) {
    switch(gubun) {
      case 'getCommonCode': // 공통코드 조회
        console.log('test')
        break;
    }
  }
</script>
{% endblock %} {% block contents %}
<div class="container-fluid d-flex flex-column p-0 h-100">
  <!-- 검색 조건 영역 -->
  <div class="row no-gutters mb-2">
    <div class="col-12">
      <div class="search-header">
        <div class="search-title">
          <i class="search-title__icon xi-bars"></i>
          <span class="search-title__name">조회조건</span>
        </div>
        <div class="search-buttons">
          <button class="btn_sub active" onclick="doAction1('reset');"><i class="xi-refresh"> 초기화</i></button>
          <button class="btn_main active" onclick="doAction1('search');"><i class="xi-search"> 조회</i></button>
        </div>
      </div>
      <form id="srchForm" class="search-content">
        <table style="width: 100%; table-layout: fixed;">
          <colgroup>
            <col width="10%">
            <col width="15%">
            <col width="10%">
            <col width="15%">
            <col width="10%">
            <col width="15%">
            <col width="10%">
            <col width="15%">
          </colgroup>
          <tr style="width: 100%;">
            <td class="search-menu">
              <label class="required" for="menuName" data-toggle="tooltip" data-placement="bottom" title="메뉴명">메뉴명</label>
            </td>
            <td>
              <input type="text" name="menuName" id="menuName" autocomplete="off"/>
            </td>
            <td class="search-menu">
              <label for="url" data-toggle="tooltip" data-placement="bottom" title="URL">URL</label>
            </td>
            <td>
              <input type="text" name="url" id="url" autocomplete="off"/>
            </td>
            <td class="search-menu">
              <label for="useYn" data-toggle="tooltip" data-placement="bottom"  title="사용여부">사용여부</label>
            </td>
            <td>
              <input type="checkbox" name="useYn" id="useYn" checked autocomplete="off"/>
            </td>
            <td class="search-menu">
              <label for="date" data-toggle="tooltip" data-placement="bottom"  title="생성일자" >생성일자</label>
            </td>
            <td>
              <div class="input-group date">
                <input type="text" id="date" name="date"/><span class="input-group-addon" autocomplete="off"><i class="xi-calendar-check"></i></span>
              </div>
            </td>
          </tr>
          <tr>
            <td class="search-menu">
              <label for="test"  data-toggle="tooltip" data-placement="bottom" title="test1" >test1</label>
            </td>
            <td>
              <input type="text" name="test" id="test" autocomplete="off"/>
            </td>
            <td class="search-menu">
              <label for="test2" data-toggle="tooltip" data-placement="bottom" title="test2" >test2</label>
            </td>
            <td>
              <input type="text" name="test" id="test2" autocomplete="off"/>
            </td>
            <td class="search-menu"  >
              <label for="gender" data-toggle="tooltip" data-placement="bottom"  title="성별">성별</label>
            </td>
            <td>
              <select name="gender" id="gender">
                <option value="M">남</option>
                <option value="F">여</option>
              </select>
            </td>
            <td class="search-menu">
              <label for="month" data-toggle="tooltip" data-placement="bottom"  title="생성년월" >생성년월</label>
            </td>
            <td>
              <div class="input-group date">
                <input type="text" id="month" name="month" autocomplete="off"/><span class="input-group-addon"><i class="xi-calendar-check"></i></span>
              </div>
            </td>
          </tr>
        </table> 
      </form>
    </div>
  </div>

  <!-- 그리드 영역 -->
  <div class="row no-gutters flex-grow-1">
    <div class="grid col-12 d-flex flex-column">
      <div class="grid-header">
        <div class="grid-title">
          <i class="grid-title__icon xi-sort-desc"></i>
          <span class="grid-title__name">메뉴목록</span>
          <span class="grid-title__cnt"></span>
        </div>
        <div class="grid-buttons">
          <button class="btn_sub active" onclick="doAction1('selectRow');"><i class="xi-plus-min"> 선택</i></button>
        </div>
      </div>
      <div class="grid-content flex-grow-1">
        <div id="grid1"></div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
